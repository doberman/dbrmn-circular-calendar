<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex" />
    <title>CIRCULAR CALENDAR</title>
    <link href="./index.css" rel="stylesheet" />
  </head>

  <body class="hidden">
    <h1 class="text-2xl font-bold uppercase text-center">
      Doberman year is round
    </h1>
    <p class="text-sm font-light text-center">
      Very welcome to the circular calendar
    </p>
    <div class="flex flex-row justify-between my-5 mx-3">
      <div class="flex flex-col md:flex-row space-x-1">
        <button id="nordic" class="p-2">Nordic</button>
        <button id="stockholm" class="p-2">Stockholm</button>
        <button id="copenhagen" class="p-2">Copenhagen</button>
        <button id="oslo" class="p-2">Oslo</button>
        <button id="helsinki" class="p-2">Helsinki</button>
        <button id="ey" class="p-2">EY</button>
      </div>
      <div class="flex flex-col md:flex-row space-x-1">
        <button id="days" class="p-2">Days</button>
        <button id="weeks" class="p-2">Weeks</button>
        <button id="months" class="p-2">Months</button>
      </div>
    </div>
    <svg id="calendar" class="w-screen h-[45vh] md:h-[85vh]"></svg>
    <script type="module">
      import { setupCalendars, selectInterval, toggleCalendar } from './app'
      import { getInterval, getUser } from './state'
      const user = getUser()
      const body = document.querySelector('body')
      if (!user) location.replace('index.html')

      const init = async () => {

        await setupCalendars()
        selectInterval(getInterval())

        //Interval click handlers
        document
          .getElementById('days')
          .addEventListener('click', () => selectInterval('days'))

        document
          .getElementById('weeks')
          .addEventListener('click', () => selectInterval('weeks'))

        document
          .getElementById('months')
          .addEventListener('click', () => selectInterval('months'))

        //Calendar click handlers
        document
          .getElementById('nordic')
          .addEventListener('click', () => toggleCalendar('nordic'))

        document
          .getElementById('stockholm')
          .addEventListener('click', () => toggleCalendar('stockholm'))

        document
          .getElementById('copenhagen')
          .addEventListener('click', () => toggleCalendar('copenhagen'))

        document
          .getElementById('oslo')
          .addEventListener('click', () => toggleCalendar('oslo'))

        document
          .getElementById('helsinki')
          .addEventListener('click', () => toggleCalendar('helsinki'))

        document
          .getElementById('ey')
          .addEventListener('click', () => toggleCalendar('ey'))
      }

        if (user) {
          body.classList.remove('hidden')
          init()
        }
    </script>
  </body>
</html>
